import pytest
from datetime import *
from bin.process_shifts import Shifts
from bin.process_labour import ShiftLabour


class TestLabourCosts:

    def test_calculate_labour_costs_1(self):
        labour = ShiftLabour()
        assert labour.cost_per_hour(user_time) == {
            '10:00': 9.999999999999998,
            '11:00': 9.999999999999998,
            '12:00': 9.999999999999998,
            '13:00': 9.999999999999998,
            '14:00': 9.999999999999998,
            '18:00': 9.999999999999998,
            '19:00': 9.999999999999998,
            '20:00': 9.999999999999998,
            '21:00': 9.999999999999998,
            '22:00': 9.999999999999998
        }

    def test_calculate_labour_costs_1(self):
        labour = ShiftLabour()
        assert labour.cost_per_hour(user2_time) == {
            '09:00': 19.999999999999996,
            '10:00': 19.999999999999996,
            '11:00': 19.999999999999996,
            '12:00': 19.999999999999996,
            '13:00': 19.999999999999996,
            '14:00': 19.999999999999996,
            '15:00': 19.999999999999996,
            '16:00': 16.666666666666675,
            '17:00': 19.999999999999996,
            '18:00': 19.999999999999996,
            '19:00': 19.999999999999996,
            '20:00': 19.999999999999996,
            '21:00': 19.999999999999996,
            '22:00': 19.999999999999996
        }

    def test_total_labour_cost(self):
        labour = ShiftLabour()
        assert labour.total_labour_cost(raw_data) == {
            '09:00': 20.0,
            '10:00': 30.0,
            '11:00': 30.0,
            '12:00': 30.0,
            '13:00': 30.0,
            '14:00': 30.0,
            '15:00': 20.0,
            '16:00': 16.67,
            '17:00': 20.0,
            '18:00': 30.0,
            '19:00': 30.0,
            '20:00': 30.0,
            '21:00': 30.0,
            '22:00': 30.0,
        }


user_time = ['15-18', '23:00', '10.0', '10:00']
user2_time = ['4-4.10PM', '23:00', '20.0', '09:00']
raw_data = "break_notes,end_time,pay_rate,start_time\n15-18,23:00,10.0,10:00\n4-4.10PM,23:00,20.0,09:00"
